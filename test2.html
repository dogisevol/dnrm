
<!DOCTYPE html>
<html>
<head>
    <title>Spacial Location Data Capture Tool</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
	
    <!-- common libraries --> 
    <link rel="stylesheet" data-bind-filename="overwrite.css" type="text/css" href="/?a=251381" >
	<link rel="stylesheet" data-bind-filename="bootstrap.min.css" type="text/css" href="/?a=269347">
	<link rel="stylesheet" data-bind-filename="font-awesome.css" type="text/css" href="/?a=269346">
	<link rel="stylesheet" data-bind-filename="font-lato.css" type="text/css" href="/?a=269349" >

	<script type="text/javascript" data-bind-filename="jquery.min.js"   src="/?a=269345"></script>
	<script type="text/javascript" data-bind-filename="knockout-min.js" src="/?a=269343"></script>
	<script type="text/javascript" data-bind-filename="bootstrap.min.js" src="/?a=269342"></script>
	<script type="text/javascript" data-bind-filename="moment.min.js" src="/?a=389128"></script>
	
	
</head>
<body>
    <div id="map" style="width: 600px; height: 400px"></div>
	
	<div>
	<h2>Data Points Captured</h2>
	<table cellspacing=0 cellpadding=4 id="table">
	</div>
	<button id="removeCapturedDataPointsBtnId">Remove all data points</button>

	
	
    <script
        src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js">
    </script>

    <script>
        var map = L.map('map').setView([-27.468508, 144.053614], 5);
        mapLink = 
            '<a href="http://www.esri.com/">Esri</a>';
        wholink = 
            'i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community';
        L.tileLayer(
            'http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; '+mapLink+', '+wholink,
            maxZoom: 18,
            }).addTo(map);
  
		// Add marker group to hold selected series of markers
		var markerGroup = L.layerGroup().addTo(map);
		
		// Add new marker to marker group
		function addMarker(e){
			// Add marker to map at click location
			var newMarker = new L.marker(e.latlng, {title: e.latlng.toString()}).addTo(markerGroup);			
			//console.log(newMarker);
			addMarkerToTable(newMarker);			
		}		
		map.on('click', addMarker);
		
		// Add new marker to table
		function addMarkerToTable(newMarker) {	
			//var table = document.getElementById('table');
			var table = document.getElementById('table');
			var rowCount = table.rows.length;
			var row = table.insertRow(rowCount);
			var cell1 = row.insertCell(0);
			cell1.innerHTML = newMarker._latlng.toString();			
			//cell1.innerHTML = newMarker._latlng.lat.toString() + ', ' + newMarker._latlng.lng.toString();
		}
  
		document.getElementById("removeCapturedDataPointsBtnId").onclick = removeCapturedDataPoints;
		
		// Remove all markers from marker group 
		function removeCapturedDataPoints() {			
			var idstore = [];   
			for(var x in markerGroup._layers) {
				console.log(x);
				markerGroup.removeLayer(x);
			}
			
			// Remove all markers from table
			removeDataCapturedPointsFromTable();
			
			//alert('Deleted points');
			// Remove all markers by removing markerGroup
			//map.removeLayer(markerGroup);
		}
		
		
		function removeDataCapturedPointsFromTable() {
			var table = document.getElementById("table");
			for(var i = 0; i < table.rows.length;)
			{   
			   table.deleteRow(i);
			}
		}		

    </script>
</body>
</html>